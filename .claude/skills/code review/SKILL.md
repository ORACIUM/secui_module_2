---
name: code-review
description: Python ì½”ë“œë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë¦¬ë·°í•˜ê³  ê°œì„  ì œì•ˆì„ ì œê³µí•©ë‹ˆë‹¤
version: 2.0.0
---

# Python Code Review Skill

Python ì½”ë“œì˜ í’ˆì§ˆ, ì„±ëŠ¥, ë³´ì•ˆ, ê°€ë…ì„±ì„ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.

## When to Use

- ì‚¬ìš©ìê°€ "ì½”ë“œ ë¦¬ë·°í•´ì¤˜", "code review" ìš”ì²­ ì‹œ
- ìƒˆë¡œìš´ ëª¨ë“ˆì´ë‚˜ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ í›„
- ë¦¬íŒ©í† ë§ ì „ í˜„ì¬ ì½”ë“œ ìƒíƒœ ë¶„ì„ì´ í•„ìš”í•  ë•Œ
- Pull Request ìƒì„± ì „ ìì²´ ê²€í† ê°€ í•„ìš”í•  ë•Œ

## What It Does

ì½”ë“œì˜ 6ê°€ì§€ ì¸¡ë©´ì„ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ê°œì„ ì ì„ ì œì‹œí•©ë‹ˆë‹¤:
1. **ì½”ë“œ í’ˆì§ˆ**: PEP 8, ë„¤ì´ë°, êµ¬ì¡°
2. **ì„±ëŠ¥ ìµœì í™”**: ì•Œê³ ë¦¬ì¦˜, ë©”ëª¨ë¦¬ ì‚¬ìš©
3. **ë³´ì•ˆ**: ì·¨ì•½ì , ì…ë ¥ ê²€ì¦
4. **ëª¨ë˜ Python**: Python 3.x ê¸°ëŠ¥ í™œìš©
5. **ì—ëŸ¬ ì²˜ë¦¬**: ì˜ˆì™¸ ì²˜ë¦¬, ë¡œê¹…
6. **ê°€ë…ì„±**: ë¬¸ì„œí™”, ë³µì¡ë„

## Review Criteria

### 1. ì½”ë“œ í’ˆì§ˆ
- **PEP 8 ì¤€ìˆ˜**: ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜ ì—¬ë¶€
- **ë„¤ì´ë°**: ë³€ìˆ˜ëª…, í•¨ìˆ˜ëª…, í´ë˜ìŠ¤ëª…ì˜ ëª…í™•ì„±ê³¼ ì¼ê´€ì„±
- **í•¨ìˆ˜ ì„¤ê³„**: ë‹¨ì¼ ì±…ì„ ì›ì¹™, í•¨ìˆ˜ ê¸¸ì´ (20-30ì¤„ ì´ë‚´)
- **DRY ì›ì¹™**: ì½”ë“œ ì¤‘ë³µ ìµœì†Œí™”
- **SOLID ì›ì¹™**: ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ ì¤€ìˆ˜

### 2. ì„±ëŠ¥ ìµœì í™”
- **ì•Œê³ ë¦¬ì¦˜**: ì‹œê°„ ë³µì¡ë„, ë¶ˆí•„ìš”í•œ ë°˜ë³µ
- **ë©”ëª¨ë¦¬**: ë¶ˆí•„ìš”í•œ ë³µì‚¬, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜
- **ë‚´ì¥ í•¨ìˆ˜**: list comprehension, generator í™œìš©
- **ë°ì´í„° êµ¬ì¡°**: ì ì ˆí•œ ìë£Œêµ¬ì¡° ì„ íƒ (list vs set vs dict)
- **I/O ìµœì í™”**: íŒŒì¼ ì½ê¸°/ì“°ê¸°, ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬

### 3. ë³´ì•ˆ
- **SQL Injection**: ORM ì‚¬ìš©, íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬
- **ì…ë ¥ ê²€ì¦**: ì‚¬ìš©ì ì…ë ¥ ê²€ì¦ ë° sanitization
- **ë¯¼ê° ì •ë³´**: í•˜ë“œì½”ë”©ëœ ë¹„ë°€ë²ˆí˜¸, API í‚¤
- **ì•ˆì „í•œ í•¨ìˆ˜**: eval(), exec() ì‚¬ìš© ê¸ˆì§€
- **ì˜ì¡´ì„±**: ì•Œë ¤ì§„ ì·¨ì•½ì ì´ ìˆëŠ” íŒ¨í‚¤ì§€

### 4. ëª¨ë˜ Python (3.8+)
- **Type Hints**: íƒ€ì… íŒíŒ… ì‚¬ìš©
- **f-strings**: ë¬¸ìì—´ í¬ë§¤íŒ…
- **dataclasses**: ë°ì´í„° í´ë˜ìŠ¤ í™œìš©
- **async/await**: ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°
- **walrus operator**: := ì—°ì‚°ì í™œìš©
- **match/case**: íŒ¨í„´ ë§¤ì¹­ (Python 3.10+)

### 5. ì—ëŸ¬ ì²˜ë¦¬
- **ì˜ˆì™¸ ì²˜ë¦¬**: ì ì ˆí•œ try-except ì‚¬ìš©
- **íŠ¹ì • ì˜ˆì™¸**: Exception ëŒ€ì‹  êµ¬ì²´ì ì¸ ì˜ˆì™¸
- **ë¡œê¹…**: logging ëª¨ë“ˆ ì‚¬ìš©
- **ì—ëŸ¬ ë©”ì‹œì§€**: ëª…í™•í•˜ê³  ë„ì›€ì´ ë˜ëŠ” ë©”ì‹œì§€
- **ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**: context manager (with statement) ì‚¬ìš©

### 6. ê°€ë…ì„± ë° ë¬¸ì„œí™”
- **Docstrings**: í•¨ìˆ˜, í´ë˜ìŠ¤, ëª¨ë“ˆ ë¬¸ì„œí™”
- **ì£¼ì„**: ë³µì¡í•œ ë¡œì§ ì„¤ëª… (ê³¼ë„í•œ ì£¼ì„ ì§€ì–‘)
- **ì½”ë“œ êµ¬ì¡°**: ë…¼ë¦¬ì ì¸ ì½”ë“œ êµ¬ì„±
- **ë³µì¡ë„**: Cyclomatic Complexity 10 ì´í•˜ ê¶Œì¥
- **ì„í¬íŠ¸**: í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ > ì„œë“œíŒŒí‹° > ë¡œì»¬ ìˆœì„œ

## Output Format

ë¦¬ë·° ê²°ê³¼ëŠ” ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤:

```markdown
# Code Review: [íŒŒì¼ëª…]

## ğŸ“Š ì¢…í•© í‰ê°€
- **ì „ì²´ ì ìˆ˜**: X/100
- **ì£¼ìš” ê°•ì **: [ê°•ì  ë‚˜ì—´]
- **ê°œì„  í•„ìš” ì˜ì—­**: [ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„]

## ğŸ” ë°œê²¬ëœ ì´ìŠˆ

### [ì‹¬ê°ë„] Issue #1: [ì´ìŠˆ ì œëª©]
- **ìœ„ì¹˜**: `íŒŒì¼ëª…:ì¤„ë²ˆí˜¸`
- **ì¹´í…Œê³ ë¦¬**: [ì½”ë“œí’ˆì§ˆ|ì„±ëŠ¥|ë³´ì•ˆ|ëª¨ë˜Python|ì—ëŸ¬ì²˜ë¦¬|ê°€ë…ì„±]
- **ì„¤ëª…**: [ì´ìŠˆ ìƒì„¸ ì„¤ëª…]
- **ì˜í–¥**: [ì´ ì´ìŠˆê°€ ë¯¸ì¹˜ëŠ” ì˜í–¥]
- **ê°œì„  ì œì•ˆ**: [êµ¬ì²´ì ì¸ ê°œì„  ë°©ë²•]

**Before:**
```python
# ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œ
```

**After:**
```python
# ê°œì„ ëœ ì½”ë“œ
```

**ê°œì„  íš¨ê³¼**:
- íš¨ê³¼ 1
- íš¨ê³¼ 2

[ì¶”ê°€ ì´ìŠˆë“¤...]

## âœ… ì¢‹ì€ ì 

- [ì¹­ì°¬í•  ë§Œí•œ ì½”ë“œ íŒ¨í„´ì´ë‚˜ êµ¬í˜„]

## ğŸ“ ì¶”ê°€ ê¶Œì¥ì‚¬í•­

- [ì „ë°˜ì ì¸ ê°œì„  ì œì•ˆ]

## ğŸ¯ ìš°ì„ ìˆœìœ„

1. **ì¦‰ì‹œ ìˆ˜ì • í•„ìš”** (HIGH): [ì´ìŠˆ ë²ˆí˜¸]
2. **ì¡°ë§Œê°„ ìˆ˜ì • ê¶Œì¥** (MEDIUM): [ì´ìŠˆ ë²ˆí˜¸]
3. **ê°œì„  ê³ ë ¤** (LOW): [ì´ìŠˆ ë²ˆí˜¸]
```

## Severity Levels

- ğŸ”´ **HIGH (Critical)**: ë³´ì•ˆ ì·¨ì•½ì , ì‹¬ê°í•œ ë²„ê·¸, ì„±ëŠ¥ ë¬¸ì œ
- ğŸŸ¡ **MEDIUM (Important)**: ì½”ë“œ í’ˆì§ˆ, ìœ ì§€ë³´ìˆ˜ì„± ë¬¸ì œ
- ğŸŸ¢ **LOW (Minor)**: ìŠ¤íƒ€ì¼, ê°€ë…ì„±, ì‘ì€ ìµœì í™”

## Example Review

### Before:
```python
def get_user_data(id):
    conn = sqlite3.connect('db.sqlite')
    cursor = conn.cursor()
    result = cursor.execute("SELECT * FROM users WHERE id = " + str(id))
    data = result.fetchall()
    return data
```

### Issues Found:
1. ğŸ”´ **SQL Injection ì·¨ì•½ì ** - ì‚¬ìš©ì ì…ë ¥ì„ ì§ì ‘ ì¿¼ë¦¬ì— ì‚½ì…
2. ğŸŸ¡ **ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜** - ì—°ê²°ì´ ë‹«íˆì§€ ì•ŠìŒ
3. ğŸŸ¡ **íƒ€ì… íŒíŒ… ì—†ìŒ** - í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë¶ˆëª…í™•
4. ğŸŸ¢ **ë³€ìˆ˜ëª…** - `id`ëŠ” ë‚´ì¥ í•¨ìˆ˜ì™€ ì¶©ëŒ

### After:
```python
from typing import List, Tuple, Any
import sqlite3

def get_user_data(user_id: int) -> List[Tuple[Any, ...]]:
    """
    ì‚¬ìš©ì IDë¡œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

    Args:
        user_id: ì¡°íšŒí•  ì‚¬ìš©ìì˜ ID

    Returns:
        ì‚¬ìš©ì ë°ì´í„° ë¦¬ìŠ¤íŠ¸ (ê° í•­ëª©ì€ íŠœí”Œ)

    Raises:
        ValueError: user_idê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°
    """
    if not isinstance(user_id, int) or user_id <= 0:
        raise ValueError(f"Invalid user_id: {user_id}")

    with sqlite3.connect('db.sqlite') as conn:
        cursor = conn.cursor()
        # íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ë¡œ SQL Injection ë°©ì§€
        result = cursor.execute(
            "SELECT * FROM users WHERE id = ?",
            (user_id,)
        )
        return result.fetchall()
```

### Improvements:
- âœ… SQL Injection ë°©ì§€ (íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬)
- âœ… ìë™ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ (context manager)
- âœ… íƒ€ì… íŒíŒ… ì¶”ê°€
- âœ… Docstring ì¶”ê°€
- âœ… ì…ë ¥ ê²€ì¦ ì¶”ê°€
- âœ… ë³€ìˆ˜ëª… ê°œì„  (id â†’ user_id)

## Best Practices Checklist

ë¦¬ë·° ì‹œ ë‹¤ìŒ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤:

### General
- [ ] PEP 8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜
- [ ] ì˜ë¯¸ìˆëŠ” ë³€ìˆ˜/í•¨ìˆ˜ ì´ë¦„
- [ ] í•¨ìˆ˜ëŠ” í•œ ê°€ì§€ ì¼ë§Œ ìˆ˜í–‰
- [ ] DRY ì›ì¹™ ì¤€ìˆ˜
- [ ] ì ì ˆí•œ ì£¼ì„ê³¼ docstring

### Python Specific
- [ ] Type hints ì‚¬ìš©
- [ ] f-strings ì‚¬ìš© (% ë˜ëŠ” .format() ëŒ€ì‹ )
- [ ] List comprehension í™œìš©
- [ ] Context manager (with) ì‚¬ìš©
- [ ] ì ì ˆí•œ ì˜ˆì™¸ ì²˜ë¦¬

### Performance
- [ ] O(nÂ²) ì´ìƒì˜ ì•Œê³ ë¦¬ì¦˜ ìµœì†Œí™”
- [ ] ë¶ˆí•„ìš”í•œ ë¦¬ìŠ¤íŠ¸ ë³µì‚¬ ë°©ì§€
- [ ] Generator ì‚¬ìš© ê³ ë ¤
- [ ] ìºì‹± ê³ ë ¤ (functools.lru_cache)

### Security
- [ ] ì‚¬ìš©ì ì…ë ¥ ê²€ì¦
- [ ] SQL Injection ë°©ì§€
- [ ] ë¯¼ê° ì •ë³´ í•˜ë“œì½”ë”© ê¸ˆì§€
- [ ] ì•ˆì „í•˜ì§€ ì•Šì€ í•¨ìˆ˜ ì‚¬ìš© ê¸ˆì§€

### Testing
- [ ] í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°
- [ ] ì ì ˆí•œ í•¨ìˆ˜ í¬ê¸°
- [ ] ì˜ì¡´ì„± ì£¼ì… ê³ ë ¤

## Usage Examples

### Single File Review
```
/code-review src/agent/collectors/cpu.py
```

### Multiple Files Review
```
/code-review src/agent/collectors/
```

### Focus on Specific Aspect
```
/code-review src/agent/main.py --focus=security
```

## Integration with Development Workflow

1. **êµ¬í˜„ í›„**: ìƒˆ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ ì‹œ ì¦‰ì‹œ ë¦¬ë·°
2. **PR ì „**: Pull Request ìƒì„± ì „ ìì²´ ê²€í† 
3. **ë¦¬íŒ©í† ë§ ì „**: ê°œì„  í¬ì¸íŠ¸ íŒŒì•…
4. **ì½”ë“œ í’ˆì§ˆ ì²´í¬**: ì •ê¸°ì ì¸ ì½”ë“œë² ì´ìŠ¤ ì ê²€

## Notes

- í”„ë¡œì íŠ¸ì˜ lint ì„¤ì • (flake8, black, mypy)ì´ ìˆë‹¤ë©´ ìš°ì„  ì ìš©
- ë¦¬ë·°ëŠ” ì œì•ˆì‚¬í•­ì´ë©°, í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ ì ìš© ì—¬ë¶€ íŒë‹¨
- ëŒ€ê·œëª¨ íŒŒì¼ì€ ì£¼ìš” ì´ìŠˆ ìœ„ì£¼ë¡œ ë¦¬ë·°
- ë ˆê±°ì‹œ ì½”ë“œëŠ” ì ì§„ì  ê°œì„  ê¶Œì¥ (big-bang ë¦¬íŒ©í† ë§ ì§€ì–‘)
- íŒ€ì˜ ì½”ë”© ì»¨ë²¤ì…˜ì´ PEP 8ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ (íŒ€ ì»¨ë²¤ì…˜ ìš°ì„ )
